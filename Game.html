<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Do it like jesus!</title>

  <link rel="shortcut icon" type="image/png" href="lib/jasmine-2.0.0/jasmine_favicon.png">



    <script type="text/javascript" src="lib/pixi.dev.js"></script>

    <script type="text/javascript" src="src/Timer.js"></script>

    <!-- include source files here... -->
    <script type="text/javascript" src="src/Level.js"></script>
    <script type="text/javascript" src="src/Game.js"></script>
    <script type="text/javascript" src="src/Engine.js"></script>


    <script type="text/javascript" src="src/view/JesusView.js"></script>



    <style>
        body { background-color: #000000; color: #ffffff}
        canvas { background-color: #222222; }
    </style>
</head>



<body onload="init();">

<h1>
    Do it like Jesus!
</h1>

<div align="center">
    <canvas id="game-canvas" width="512" height="384"></canvas>
</div>


<div id="viewcontainer">

</div>



<script type="text/javascript">

    var factor = 100;


    function init() {

        dlj = new DoItLikeJesus();
        stage = new PIXI.Stage(0x94bfff);
        renderer = PIXI.autoDetectRenderer(
                1200,
                400,
                document.getElementById("game-canvas")
        );



        sectionViews = [];


        var sections = dlj.game.level.sections;
        var pos = 0;
        for (var i = 0; i < sections.length; i++) {
            var section = sections[i];
            var type = "sand";
            if (section.type.type == "water") {
                type = "water";

            }
            var view = new LandscapeView(type, section.getLength()*factor, pos);


            pos = pos + (section.getLength() * factor);

            sectionViews[i] = view;
        }



        jesusView = new JesusView();

        stage.addChild(new LandscapeView("sand", 1200 * factor, 0));

        for (var i = 0; i < sectionViews.length; i++) {
            stage.addChild(sectionViews[i]);
        }


        stage.addChild(jesusView);




        requestAnimFrame(update);

    }


    function update() {

        var x = dlj.jesus.getCurrentPosition() * factor;

        for (var i = 0; i < sectionViews.length; i++) {
            sectionViews[i].moveTo(x);
        }


        renderer.render(stage);
        requestAnimFrame(update);
    }


</script>

</body>
</html>
